<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.19.1 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Financial Data Visualization - Distributions - The Realm of Data Science</title>
<meta name="description" content="Visualizing Distributions in R - Finance ">


  <meta name="author" content="Pavitra Prabhu">


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="The Realm of Data Science">
<meta property="og:title" content="Financial Data Visualization - Distributions">
<meta property="og:url" content="http://localhost:4000/learning/R_DataVisualization_VisualizingDistributions/">


  <meta property="og:description" content="Visualizing Distributions in R - Finance ">







  <meta property="article:published_time" content="2020-08-10T22:12:28-05:00">





  

  


<link rel="canonical" href="http://localhost:4000/learning/R_DataVisualization_VisualizingDistributions/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Pavitra Prabhu",
      "url": "http://localhost:4000/"
    
  }
</script>






<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="The Realm of Data Science Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          The Realm of Data Science
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/about/">About</a>
            </li><li class="masthead__menu-item">
              <a href="/projects/">Projects</a>
            </li><li class="masthead__menu-item">
              <a href="/learning/">Learning</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Pavitra Prabhu</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>My adventure in Data Science and Analytics</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Waukesha, WI</span>
        </li>
      

      
        
          
            <li><a href="mailto:pavitrashivananda.prabhu@gmail.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i><span class="label">Email</span></a></li>
          
        
          
            <li><a href="https://github.com/prabhupavitra?tab=repositories" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span></a></li>
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Financial Data Visualization - Distributions">
    <meta itemprop="description" content="Visualizing Distributions in R - Finance">
    <meta itemprop="datePublished" content="2020-08-10T22:12:28-05:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Financial Data Visualization - Distributions
</h1>
          
            <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  11 minute read

</p>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
        <p><img src="/img/Learning/Teaser/viz-distributions.png" alt="this is a placeholder image" width="100%" height="50%" class="center" /></p>

<p><span style="font-family:Georgia; font-size:16px;">
This article is part of <strong>financial data visualization</strong> blog series where we cover most prominent plots used to quickly comprehend thousands or even millions of data points to support decision-making in finance. In this article, we examine ways of visualizing distributions in finance.</span></p>

<p><span style="font-family:Georgia; font-size:16px;">
Analyzing and visualizing distributions is widely used in Data Science projects since we are interested in understanding the behaviour of a numeric variable. In other words, we would want to know the central tendency of a variable as well as the outliers. We would also be interested in knowing if the variable is symmetrically distributed or skewed, if the distribution is unimodal/bimodal/multimodal, if it contains suspicious/impossible values and so on</span></p>

<p><span style="font-family:Georgia; font-size:16px;">
Most commonly used visualizations to compare amounts include:</span></p>

<p><span style="font-family:Georgia; font-size:16px;"> 1. Histogram</span> <br />
<span style="font-family:Georgia; font-size:16px;"> 2. Density Plot</span>  <br />
<span style="font-family:Georgia; font-size:16px;"> 3. Empirical cumulative distribution function</span>  <br />
<span style="font-family:Georgia; font-size:16px;"> 4. Boxplot</span>  <br />
<span style="font-family:Georgia; font-size:16px;"> 5. Violin Plot</span>  <br />
<span style="font-family:Georgia; font-size:16px;"> 6. Strip Chart</span>  <br />
<span style="font-family:Georgia; font-size:16px;"> 7. Sina Plot</span>  <br />
<span style="font-family:Georgia; font-size:16px;"> 8. Ridgeline Plot</span>  <br />
<span style="font-family:Georgia; font-size:16px;"> 9. Quantileâ€“quantile plot</span></p>

<p><span style="font-family:Georgia; font-size:16px;">
We will be using quandl api and quantmod api to import financial data. Using an API for importing data is beneficial, especially in finance, because the dataset is updated extremely frequently, and they offer a lot of benefits in terms of ease and flexibility. </span>  <br />
<span style="font-family:Georgia; font-size:16px;">
We can install quandl &amp; quantmod packages and register an account on quandl.com</span></p>

<p><span style="font-family:Georgia; font-size:16px;">
Create a free Quandl account and set your API key here</span>  <br />
<span style="font-family:Georgia; font-size:16px;">
For more information, refer to the link below : </span>  <br />
<span style="font-family:Georgia; font-size:16px;">
<a href="https://www.quandl.com/tools/r"> https://www.quandl.com/tools/r </a> </span></p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Run the script below with your secret key obtained after registering on quandl</span><span class="w">
</span><span class="c1"># quandl_sk = "&lt;quandl secret key&gt;"</span><span class="w">

</span><span class="c1"># Alternative way to Load Data Tokens by declaring them in a file </span><span class="w">
</span><span class="n">source</span><span class="p">(</span><span class="s2">"../R/Setup/apitokens.r"</span><span class="p">)</span><span class="w">

</span><span class="c1"># Data manipulation libraries used in this notebook</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">tibble</span><span class="p">)</span><span class="w"> </span><span class="c1"># includes rownames_to_column function</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span><span class="w"> </span><span class="c1"># includes filter function</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">tidyr</span><span class="p">)</span><span class="w"> </span><span class="c1"># includes spread function</span><span class="w">

</span><span class="c1"># Visualization libraries used in this notebook</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span><span class="w"> </span><span class="c1"># Includes ggplot function</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">ggforce</span><span class="p">)</span><span class="w"> </span><span class="c1"># Includes geom_sina &amp; geom_parallel_sets</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">ggridges</span><span class="p">)</span><span class="w"> </span><span class="c1"># Includes geom_</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">cowplot</span><span class="p">)</span><span class="w"> </span><span class="c1"># Includes axis_canvas for generating A Canvas Onto Which One Can Draw Axis-Like Objects</span><span class="w">

</span><span class="c1"># Data API libraries</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">Quandl</span><span class="p">)</span><span class="w"> </span><span class="c1"># To import data from Quandl API</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">quantmod</span><span class="p">)</span><span class="w"> </span><span class="c1"># To import data using yahoo,google api</span><span class="w">

</span><span class="c1"># Animation Packages</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">gganimate</span><span class="p">)</span><span class="w"> </span><span class="c1"># to add animation to static plot </span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">gifski</span><span class="p">)</span><span class="w"> </span><span class="c1"># Converts images to GIF animations</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">png</span><span class="p">)</span><span class="w"> </span><span class="c1"># Provides an easy and simple way to read, write and display bitmap images stored in the PNG format.</span><span class="w">

</span><span class="c1"># Datetime Parsing functions</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">lubridate</span><span class="p">)</span><span class="w"> </span><span class="c1"># includes datetime parsing functions</span><span class="w">

</span><span class="c1"># Data visualization addon library for Themes and colors available in my github repository</span><span class="w">
</span><span class="c1"># https://github.com/prabhupavitra/dviz.addon</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">dviz.addon</span><span class="p">)</span><span class="w">

</span><span class="c1"># Resizing plot width and height from default 7</span><span class="w">
</span><span class="c1"># https://www.rdocumentation.org/packages/repr/versions/0.7/topics/repr-options</span><span class="w">
</span><span class="n">options</span><span class="p">(</span><span class="n">repr.plot.width</span><span class="o">=</span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="n">repr.plot.height</span><span class="o">=</span><span class="m">4</span><span class="p">)</span><span class="w">

</span></code></pre></div></div>

<blockquote>
  <p>Importing Data (Using Quandl and quantmod API)</p>
</blockquote>

<p><span style="font-family:Georgia; font-size:16px;"> 
This notebook uses Quandl and quantmod API to import Financial Data directly to R.</span></p>

<p><span style="font-family:Georgia; font-size:16px;"> Datasets used in this notebook include:</span> <br />
<span style="font-family:Georgia; font-size:16px;"> 1. Historical Prices of Precious Metals (Gold, Silver, Platinum and Palladium) </span>  <br />
<span style="font-family:Georgia; font-size:16px;"> 2. Historical Prices of Non-Ferrous Base Metals  (Aluminum; Copper; Lead; Nickel; Tin and Zinc)</span> <br />
<span style="font-family:Georgia; font-size:16px;"> 3. Consumer Price Index for All Urban Consumers (CPI-U)</span></p>

<blockquote>
  <p><span style="font-family:Georgia; font-size:16px;">Precious Metals Prices : London Fixing (U.S. Dollars per Troy Ounce)</span></p>
</blockquote>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Using Quandl API : Import prices of Precious Metals ( Gold, Silver, Platinum, Palladium )</span><span class="w">

</span><span class="c1"># Gold Price: London Fixing</span><span class="w">
</span><span class="n">gold</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">Quandl</span><span class="p">(</span><span class="s2">"LBMA/GOLD"</span><span class="p">,</span><span class="w"> </span><span class="n">api_key</span><span class="o">=</span><span class="n">quandl_sk</span><span class="p">)</span><span class="w">

</span><span class="c1"># Silver Price: London Fixing</span><span class="w">
</span><span class="n">silver</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">Quandl</span><span class="p">(</span><span class="s2">"LBMA/SILVER"</span><span class="p">,</span><span class="w"> </span><span class="n">api_key</span><span class="o">=</span><span class="n">quandl_sk</span><span class="p">)</span><span class="w">

</span><span class="c1"># Platinum Fixing</span><span class="w">
</span><span class="n">platinum</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">Quandl</span><span class="p">(</span><span class="s2">"LPPM/PLAT"</span><span class="p">,</span><span class="w"> </span><span class="n">api_key</span><span class="o">=</span><span class="n">quandl_sk</span><span class="p">)</span><span class="w">

</span><span class="c1"># Palladium</span><span class="w">
</span><span class="n">palladium</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">Quandl</span><span class="p">(</span><span class="s2">"LPPM/PALL"</span><span class="p">,</span><span class="w"> </span><span class="n">api_key</span><span class="o">=</span><span class="n">quandl_sk</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<blockquote>
  <p><span style="font-family:Georgia; font-size:16px;">Base Metals Prices : Spot Prices (U.S. Dollars per metric ton)</span></p>
</blockquote>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Other Base Metals (Aluminum; Cobalt; Copper; Iron Ore; Lead; Molybdenum; Nickel; Tin; Uranium and Zinc)</span><span class="w">

</span><span class="c1"># Aluminum; 99.5% minimum purity; LME spot price; CIF UK ports; US$ per metric ton</span><span class="w">
</span><span class="n">aluminium</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">Quandl</span><span class="p">(</span><span class="s2">"ODA/PALUM_USD"</span><span class="p">,</span><span class="w"> </span><span class="n">api_key</span><span class="o">=</span><span class="n">quandl_sk</span><span class="p">)</span><span class="w">

</span><span class="c1"># Copper; grade A cathode; LME spot price; CIF European ports; US$ per metric ton</span><span class="w">
</span><span class="n">copper</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">Quandl</span><span class="p">(</span><span class="s2">"ODA/PCOPP_USD"</span><span class="p">,</span><span class="w"> </span><span class="n">api_key</span><span class="o">=</span><span class="n">quandl_sk</span><span class="p">)</span><span class="w">

</span><span class="c1"># Lead; 99.97% pure; LME spot price; CIF European Ports; US$ per metric ton</span><span class="w">
</span><span class="n">lead</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">Quandl</span><span class="p">(</span><span class="s2">"ODA/PLEAD_USD"</span><span class="p">,</span><span class="w"> </span><span class="n">api_key</span><span class="o">=</span><span class="n">quandl_sk</span><span class="p">)</span><span class="w">

</span><span class="c1"># Nickel; melting grade; LME spot price; CIF European ports; US$ per metric ton</span><span class="w">
</span><span class="n">nickel</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">Quandl</span><span class="p">(</span><span class="s2">"ODA/PNICK_USD"</span><span class="p">,</span><span class="w"> </span><span class="n">api_key</span><span class="o">=</span><span class="n">quandl_sk</span><span class="p">)</span><span class="w">

</span><span class="c1"># Tin; standard grade; LME spot price; US$ per metric ton</span><span class="w">
</span><span class="n">tin</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">Quandl</span><span class="p">(</span><span class="s2">"ODA/PTIN_USD"</span><span class="p">,</span><span class="w"> </span><span class="n">api_key</span><span class="o">=</span><span class="n">quandl_sk</span><span class="p">)</span><span class="w">

</span><span class="c1"># Zinc; high grade 98% pure; US$ per metric ton</span><span class="w">
</span><span class="n">zinc</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">Quandl</span><span class="p">(</span><span class="s2">"ODA/PZINC_USD"</span><span class="p">,</span><span class="w"> </span><span class="n">api_key</span><span class="o">=</span><span class="n">quandl_sk</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<blockquote>
  <p><span style="font-family:Georgia; font-size:16px;">CPI Data : CPI for U.S. City Average (Units: Index 1982-1984=100, Seasonally Adjusted ; Frequency: Monthly)</span></p>
</blockquote>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Consumer Price Index for All Urban Consumers: All Items in U.S. City Average </span><span class="w">
</span><span class="n">monthly_allitems</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">Quandl</span><span class="p">(</span><span class="s2">"FRED/CPIAUCSL"</span><span class="p">,</span><span class="w"> </span><span class="n">api_key</span><span class="o">=</span><span class="n">quandl_sk</span><span class="p">)</span><span class="w"> 

</span><span class="c1"># Consumer Price Index for All Urban Consumers: Food and Beverages in U.S. City Average</span><span class="w">
</span><span class="n">monthly_foodbev</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">Quandl</span><span class="p">(</span><span class="s2">"FRED/CPIFABSL"</span><span class="p">,</span><span class="w"> </span><span class="n">api_key</span><span class="o">=</span><span class="n">quandl_sk</span><span class="p">)</span><span class="w"> 

</span><span class="c1"># Consumer Price Index for All Urban Consumers: All Items Less Food and Energy in U.S. City Average</span><span class="w">
</span><span class="n">monthly_excfoodnbev</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">Quandl</span><span class="p">(</span><span class="s2">"FRED/CPILFESL"</span><span class="p">,</span><span class="w"> </span><span class="n">api_key</span><span class="o">=</span><span class="n">quandl_sk</span><span class="p">)</span><span class="w">  

</span><span class="c1"># Consumer Price Index for All Urban Consumers: Recreation in U.S. City Average</span><span class="w">
</span><span class="n">monthly_recreation</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">Quandl</span><span class="p">(</span><span class="s2">"FRED/CPIRECSL"</span><span class="p">,</span><span class="w"> </span><span class="n">api_key</span><span class="o">=</span><span class="n">quandl_sk</span><span class="p">)</span><span class="w"> 

</span><span class="c1"># Consumer Price Index for All Urban Consumers: Housing in U.S. City Average </span><span class="w">
</span><span class="n">monthly_housing</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">Quandl</span><span class="p">(</span><span class="s2">"FRED/CPIHOSNS"</span><span class="p">,</span><span class="w"> </span><span class="n">api_key</span><span class="o">=</span><span class="n">quandl_sk</span><span class="p">)</span><span class="w"> 

</span><span class="c1"># Consumer Price Index for All Urban Consumers: Education and Communication in U.S. City Average</span><span class="w">
</span><span class="n">monthly_eduncomm</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">Quandl</span><span class="p">(</span><span class="s2">"FRED/CPIEDUSL"</span><span class="p">,</span><span class="w"> </span><span class="n">api_key</span><span class="o">=</span><span class="n">quandl_sk</span><span class="p">)</span><span class="w"> 

</span><span class="c1"># Consumer Price Index for All Urban Consumers: Apparel in U.S. City Average</span><span class="w">
</span><span class="n">monthly_apparel</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">Quandl</span><span class="p">(</span><span class="s2">"FRED/CPIAPPSL"</span><span class="p">,</span><span class="w"> </span><span class="n">api_key</span><span class="o">=</span><span class="n">quandl_sk</span><span class="p">)</span><span class="w"> 

</span><span class="c1"># Consumer Price Index for All Urban Consumers: Energy in U.S. City Average</span><span class="w">
</span><span class="n">monthly_energy</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">Quandl</span><span class="p">(</span><span class="s2">"FRED/CPIENGSL"</span><span class="p">,</span><span class="w"> </span><span class="n">api_key</span><span class="o">=</span><span class="n">quandl_sk</span><span class="p">)</span><span class="w"> 

</span><span class="c1"># Consumer Price Index for All Urban Consumers: Other Goods and Services in U.S. City Average</span><span class="w">
</span><span class="n">monthly_othergns</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">Quandl</span><span class="p">(</span><span class="s2">"FRED/CPIOGSSL"</span><span class="p">,</span><span class="w"> </span><span class="n">api_key</span><span class="o">=</span><span class="n">quandl_sk</span><span class="p">)</span><span class="w"> 

</span><span class="c1"># Consumer Price Index for All Urban Consumers: Transportation in U.S. City Average </span><span class="w">
</span><span class="n">monthly_trnsprt</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">Quandl</span><span class="p">(</span><span class="s2">"FRED/CPITRNSL"</span><span class="p">,</span><span class="w"> </span><span class="n">api_key</span><span class="o">=</span><span class="n">quandl_sk</span><span class="p">)</span><span class="w"> 

</span><span class="c1"># Consumer Price Index for All Urban Consumers: Services in U.S. City Average </span><span class="w">
</span><span class="n">monthly_otherserv</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">Quandl</span><span class="p">(</span><span class="s2">"FRED/CUSR0000SAS"</span><span class="p">,</span><span class="w"> </span><span class="n">api_key</span><span class="o">=</span><span class="n">quandl_sk</span><span class="p">)</span><span class="w"> 

</span><span class="c1"># Consumer Price Index for All Urban Consumers: Commodities in U.S. City Average</span><span class="w">
</span><span class="n">monthly_commod</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">Quandl</span><span class="p">(</span><span class="s2">"FRED/CUSR0000SAC"</span><span class="p">,</span><span class="w"> </span><span class="n">api_key</span><span class="o">=</span><span class="n">quandl_sk</span><span class="p">)</span><span class="w"> 

</span><span class="c1"># Consumer Price Index for All Urban Consumers: Medical Care in U.S. City Average</span><span class="w">
</span><span class="n">monthly_medcare</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">Quandl</span><span class="p">(</span><span class="s2">"FRED/CPIMEDSL"</span><span class="p">,</span><span class="w"> </span><span class="n">api_key</span><span class="o">=</span><span class="n">quandl_sk</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<blockquote>
  <p><span style="font-family:Georgia; font-size:16px;">Bitcoin and IBM Stock Data from Yahoo : Using Quantmod Package</span></p>
</blockquote>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cryptodata</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">new.env</span><span class="p">()</span><span class="w"> </span><span class="c1">#Make a new environment for quantmod to store data in</span><span class="w">
 
</span><span class="n">beginDate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">as.Date</span><span class="p">(</span><span class="s2">"2014-04-01"</span><span class="p">)</span><span class="w"> </span><span class="c1">#Specify period of time we are interested in</span><span class="w">
</span><span class="n">endDate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">as.Date</span><span class="p">(</span><span class="s2">"2019-12-01"</span><span class="p">)</span><span class="w">
 
</span><span class="n">ticker</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"BTC-USD"</span><span class="p">,</span><span class="s2">"IBM"</span><span class="p">)</span><span class="w"> </span><span class="c1">#Define the tickers we are interested in</span><span class="w">
 
</span><span class="c1">#Download the stock historical data (for all tickers mentioned previously)</span><span class="w">
</span><span class="n">getSymbols</span><span class="p">(</span><span class="n">ticker</span><span class="p">,</span><span class="w"> </span><span class="n">env</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cryptodata</span><span class="p">,</span><span class="w"> </span><span class="n">src</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"yahoo"</span><span class="p">,</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">beginDate</span><span class="p">,</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">endDate</span><span class="p">,</span><span class="n">auto.assign</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span><span class="w">

</span><span class="n">btcusd</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">data.frame</span><span class="p">(</span><span class="n">get</span><span class="p">(</span><span class="s2">"BTC-USD"</span><span class="p">,</span><span class="w"> </span><span class="n">envir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cryptodata</span><span class="p">))</span><span class="w">
</span><span class="n">ibmstock</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">data.frame</span><span class="p">(</span><span class="n">get</span><span class="p">(</span><span class="s2">"IBM"</span><span class="p">,</span><span class="w"> </span><span class="n">envir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cryptodata</span><span class="p">))</span><span class="w">
</span></code></pre></div></div>

<h3 id="data-preparation">Data Preparation</h3>

<blockquote>
  <p><span style="font-family:Georgia; font-size:16px;">Precious Metals Prices : London Fixing (U.S. Dollars per Troy Ounce)</span></p>
</blockquote>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Merging the datasets of all 4 precious metals (Measured per Troy Ounce)</span><span class="w">
</span><span class="n">precious_metals</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> 
</span><span class="n">rbind</span><span class="p">(</span><span class="n">gold</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">select</span><span class="p">(</span><span class="s2">"Date"</span><span class="p">,</span><span class="s2">"USD (AM)"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">rename</span><span class="p">(</span><span class="n">USD</span><span class="o">=</span><span class="s2">"USD (AM)"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">mutate</span><span class="p">(</span><span class="n">Commodity</span><span class="o">=</span><span class="s2">"Gold"</span><span class="p">),</span><span class="w">
</span><span class="n">silver</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">select</span><span class="p">(</span><span class="s2">"Date"</span><span class="p">,</span><span class="s2">"USD"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">mutate</span><span class="p">(</span><span class="n">Commodity</span><span class="o">=</span><span class="s2">"Silver"</span><span class="p">),</span><span class="w">
</span><span class="n">platinum</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">select</span><span class="p">(</span><span class="s2">"Date"</span><span class="p">,</span><span class="s2">"USD AM"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">rename</span><span class="p">(</span><span class="n">USD</span><span class="o">=</span><span class="s2">"USD AM"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">mutate</span><span class="p">(</span><span class="n">Commodity</span><span class="o">=</span><span class="s2">"Platinum"</span><span class="p">),</span><span class="w">
</span><span class="n">palladium</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">select</span><span class="p">(</span><span class="s2">"Date"</span><span class="p">,</span><span class="s2">"USD AM"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">rename</span><span class="p">(</span><span class="n">USD</span><span class="o">=</span><span class="s2">"USD AM"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">mutate</span><span class="p">(</span><span class="n">Commodity</span><span class="o">=</span><span class="s2">"Palladium"</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
</span><span class="n">mutate</span><span class="p">(</span><span class="n">Year</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">year</span><span class="p">(</span><span class="n">Date</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">filter</span><span class="p">(</span><span class="n">USD</span><span class="o">!=</span><span class="s2">"NA"</span><span class="p">)</span><span class="w">

</span><span class="n">head</span><span class="p">(</span><span class="n">precious_metals</span><span class="p">,</span><span class="m">5</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><img src="/img/Learning/visualization/viz1/tbl-1.png" alt="this is a placeholder image" width="50%" height="50%" class="center" /></p>

<blockquote>
  <p><span style="font-family:Georgia; font-size:16px;">Base Metals Prices : Spot Prices (U.S. Dollars per metric ton)</span></p>
</blockquote>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">base_metals</span><span class="w"> </span><span class="o">&lt;-</span><span class="w">
</span><span class="n">rbind</span><span class="p">(</span><span class="n">aluminium</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">mutate</span><span class="p">(</span><span class="n">Commodity</span><span class="o">=</span><span class="s2">"Aluminium"</span><span class="p">),</span><span class="w">
      </span><span class="n">copper</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">mutate</span><span class="p">(</span><span class="n">Commodity</span><span class="o">=</span><span class="s2">"Copper"</span><span class="p">),</span><span class="w">
      </span><span class="n">lead</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">mutate</span><span class="p">(</span><span class="n">Commodity</span><span class="o">=</span><span class="s2">"Lead"</span><span class="p">),</span><span class="w">
      </span><span class="n">nickel</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">mutate</span><span class="p">(</span><span class="n">Commodity</span><span class="o">=</span><span class="s2">"Nickel"</span><span class="p">),</span><span class="w">
      </span><span class="n">tin</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">mutate</span><span class="p">(</span><span class="n">Commodity</span><span class="o">=</span><span class="s2">"Tin"</span><span class="p">),</span><span class="w">
      </span><span class="n">zinc</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">mutate</span><span class="p">(</span><span class="n">Commodity</span><span class="o">=</span><span class="s2">"Zinc"</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
</span><span class="n">mutate</span><span class="p">(</span><span class="n">Year</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">year</span><span class="p">(</span><span class="n">Date</span><span class="p">))</span><span class="w">

</span><span class="n">head</span><span class="p">(</span><span class="n">base_metals</span><span class="p">,</span><span class="m">1</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>
<p><img src="/img/Learning/visualization/viz1/tbl-2.png" alt="this is a placeholder image" width="50%" height="50%" class="center" /></p>

<blockquote>
  <p><span style="font-family:Georgia; font-size:16px;">CPI Data : CPI for U.S. City Average </span></p>
</blockquote>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cpi_monthly_sa</span><span class="w"> </span><span class="o">&lt;-</span><span class="w">
</span><span class="n">rbind</span><span class="p">(</span><span class="n">monthly_allitems</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">mutate</span><span class="p">(</span><span class="n">Category</span><span class="o">=</span><span class="s2">"CPI"</span><span class="p">),</span><span class="w">
      </span><span class="n">monthly_excfoodnbev</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">mutate</span><span class="p">(</span><span class="n">Category</span><span class="o">=</span><span class="s2">"Core CPI"</span><span class="p">),</span><span class="w">
      </span><span class="n">monthly_apparel</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">mutate</span><span class="p">(</span><span class="n">Category</span><span class="o">=</span><span class="s2">"Apparel"</span><span class="p">),</span><span class="w">
      </span><span class="n">monthly_commod</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">mutate</span><span class="p">(</span><span class="n">Category</span><span class="o">=</span><span class="s2">"Commodities"</span><span class="p">),</span><span class="w">
      </span><span class="n">monthly_eduncomm</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">mutate</span><span class="p">(</span><span class="n">Category</span><span class="o">=</span><span class="s2">"Education &amp; Communication"</span><span class="p">),</span><span class="w">
      </span><span class="n">monthly_energy</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">mutate</span><span class="p">(</span><span class="n">Category</span><span class="o">=</span><span class="s2">"Energy"</span><span class="p">),</span><span class="w">
      </span><span class="n">monthly_foodbev</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">mutate</span><span class="p">(</span><span class="n">Category</span><span class="o">=</span><span class="s2">"Food &amp; Beverages"</span><span class="p">),</span><span class="w">
      </span><span class="n">monthly_housing</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">mutate</span><span class="p">(</span><span class="n">Category</span><span class="o">=</span><span class="s2">"Housing"</span><span class="p">),</span><span class="w">
      </span><span class="n">monthly_medcare</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">mutate</span><span class="p">(</span><span class="n">Category</span><span class="o">=</span><span class="s2">"Medical Care"</span><span class="p">),</span><span class="w">
      </span><span class="n">monthly_othergns</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">mutate</span><span class="p">(</span><span class="n">Category</span><span class="o">=</span><span class="s2">"Other Goods &amp; Services"</span><span class="p">),</span><span class="w">
      </span><span class="n">monthly_otherserv</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">mutate</span><span class="p">(</span><span class="n">Category</span><span class="o">=</span><span class="s2">"Other Services"</span><span class="p">),</span><span class="w">
      </span><span class="n">monthly_recreation</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">mutate</span><span class="p">(</span><span class="n">Category</span><span class="o">=</span><span class="s2">"Recreation"</span><span class="p">),</span><span class="w">
      </span><span class="n">monthly_trnsprt</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">mutate</span><span class="p">(</span><span class="n">Category</span><span class="o">=</span><span class="s2">"Transportation"</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
</span><span class="n">mutate</span><span class="w"> </span><span class="p">(</span><span class="n">Year</span><span class="w"> </span><span class="o">=</span><span class="n">year</span><span class="p">(</span><span class="n">Date</span><span class="p">),</span><span class="n">Month</span><span class="o">=</span><span class="n">month</span><span class="p">(</span><span class="n">Date</span><span class="p">))</span><span class="w">

</span><span class="n">head</span><span class="p">(</span><span class="n">cpi_monthly_sa</span><span class="p">,</span><span class="m">1</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>
<p><img src="/img/Learning/visualization/viz1/tbl-3.png" alt="this is a placeholder image" width="50%" height="50%" class="center" /></p>

<blockquote>
  <p><span style="font-family:Georgia; font-size:16px;">Calculating Return on Bitcoin Data from Yahoo </span></p>
</blockquote>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">btcusd_return</span><span class="w"> </span><span class="o">&lt;-</span><span class="w">
</span><span class="n">btcusd</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">rename</span><span class="p">(</span><span class="s2">"Adjusted_Close"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"BTC.USD.Adjusted"</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"Trading_Volume"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"BTC.USD.Volume"</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"High"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"BTC.USD.High"</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"Open"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"BTC.USD.Open"</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"Low"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"BTC.USD.Low"</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"Close"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"BTC.USD.Close"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
</span><span class="n">rownames_to_column</span><span class="p">(</span><span class="s2">"Date"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
</span><span class="n">mutate</span><span class="p">(</span><span class="n">Return</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Adjusted_Close</span><span class="o">/</span><span class="n">lag</span><span class="p">(</span><span class="n">Adjusted_Close</span><span class="p">)</span><span class="m">-1</span><span class="p">)</span><span class="o">*</span><span class="m">100</span><span class="p">,</span><span class="w">
       </span><span class="n">Trading_Volume_millions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Trading_Volume</span><span class="o">/</span><span class="p">(</span><span class="m">10</span><span class="o">^</span><span class="m">6</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">filter</span><span class="p">(</span><span class="n">Return</span><span class="o">!=</span><span class="s2">"NA"</span><span class="p">)</span><span class="w">

</span><span class="n">head</span><span class="p">(</span><span class="n">btcusd_return</span><span class="p">,</span><span class="m">1</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>
<p><img src="/img/Learning/visualization/viz2/tbl-4.png" alt="this is a placeholder image" width="100%" height="50%" class="center" /></p>

<p><span style="font-family:Georgia; font-size:16px;"> We will also calculate monthly return for the bitcoin and IBM stock data.</span></p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">btcusd_monthlyret</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">btcusd_return</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
                     </span><span class="n">mutate</span><span class="p">(</span><span class="n">Month</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">as.yearmon</span><span class="p">(</span><span class="n">Date</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
                     </span><span class="n">arrange</span><span class="p">(</span><span class="n">Month</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
                     </span><span class="n">group_by</span><span class="p">(</span><span class="n">Month</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
                     </span><span class="n">summarise</span><span class="p">(</span><span class="n">MonthlyReturn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mean</span><span class="p">(</span><span class="n">Return</span><span class="p">))</span><span class="w"> 

</span><span class="n">head</span><span class="p">(</span><span class="n">btcusd_monthlyret</span><span class="p">,</span><span class="m">5</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>
<p><img src="/img/Learning/visualization/viz2/tbl-5.png" alt="this is a placeholder image" width="25%" height="25%" class="center" /></p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ibmstock_return</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ibmstock</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
                   </span><span class="n">rename</span><span class="p">(</span><span class="s2">"Adjusted_Close"</span><span class="o">=</span><span class="s2">"IBM.Adjusted"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
                   </span><span class="n">mutate</span><span class="p">(</span><span class="n">Return</span><span class="o">=</span><span class="p">(</span><span class="n">Adjusted_Close</span><span class="o">/</span><span class="n">lag</span><span class="p">(</span><span class="n">Adjusted_Close</span><span class="p">)</span><span class="m">-1</span><span class="p">)</span><span class="o">*</span><span class="m">100</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
                   </span><span class="n">filter</span><span class="p">(</span><span class="n">Return</span><span class="o">!=</span><span class="s2">"NA"</span><span class="p">)</span><span class="w">

</span><span class="n">head</span><span class="p">(</span><span class="n">ibmstock_return</span><span class="p">,</span><span class="m">1</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>
<p><img src="/img/Learning/visualization/viz2/tbl-6.png" alt="this is a placeholder image" width="100%" height="50%" class="center" /></p>

<p><span style="font-family:Georgia; font-size:16px;"> Before we proceed with visualizations, we will calculate some commonly used CPI metrics</span></p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Percent Change (1982-Present)</span><span class="w">
</span><span class="n">cpi_pctchng</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">filter</span><span class="p">(</span><span class="n">cpi_monthly_sa</span><span class="p">,</span><span class="c1">#Month==1,</span><span class="w">
                                     </span><span class="n">Year</span><span class="o">&gt;</span><span class="m">1982</span><span class="p">,</span><span class="w">
                                     </span><span class="o">!</span><span class="p">(</span><span class="n">Category</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s1">'Energy'</span><span class="p">,</span><span class="s1">'Transport'</span><span class="p">)))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
               </span><span class="n">group_by</span><span class="p">(</span><span class="n">Category</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
               </span><span class="n">arrange</span><span class="p">(</span><span class="n">Date</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
               </span><span class="n">mutate</span><span class="p">(</span><span class="n">PercentChange</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Value</span><span class="o">/</span><span class="n">lag</span><span class="p">(</span><span class="n">Value</span><span class="p">)</span><span class="m">-1</span><span class="p">)</span><span class="o">*</span><span class="m">100</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
               </span><span class="n">filter</span><span class="p">(</span><span class="n">PercentChange</span><span class="o">!=</span><span class="s2">"NA"</span><span class="p">)</span><span class="w"> 

</span><span class="c1"># Over-the-year percent change </span><span class="w">
</span><span class="n">cpi_otypct</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> 
</span><span class="n">cpi_monthly_sa</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
</span><span class="n">filter</span><span class="p">(</span><span class="n">Year</span><span class="o">&gt;</span><span class="m">1982</span><span class="p">,</span><span class="n">Month</span><span class="o">==</span><span class="m">12</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
</span><span class="n">arrange</span><span class="p">(</span><span class="n">Date</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
</span><span class="n">group_by</span><span class="p">(</span><span class="n">Category</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
</span><span class="n">mutate</span><span class="p">(</span><span class="n">OverYrPercentChange</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Value</span><span class="o">/</span><span class="n">lag</span><span class="p">(</span><span class="n">Value</span><span class="p">)</span><span class="m">-1</span><span class="p">)</span><span class="o">*</span><span class="m">100</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
</span><span class="n">filter</span><span class="p">(</span><span class="n">OverYrPercentChange</span><span class="o">!=</span><span class="s2">"NA"</span><span class="p">)</span><span class="w">


</span><span class="c1"># Annual Average, Annual Average CHange and Purchasing Power</span><span class="w">
</span><span class="n">cpi_annualavg</span><span class="w"> </span><span class="o">&lt;-</span><span class="w">
</span><span class="n">cpi_monthly_sa</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">filter</span><span class="p">(</span><span class="n">Year</span><span class="o">&gt;</span><span class="m">1982</span><span class="p">,</span><span class="n">Year</span><span class="o">&lt;</span><span class="m">2020</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
</span><span class="n">arrange</span><span class="p">(</span><span class="n">Date</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
</span><span class="n">group_by</span><span class="p">(</span><span class="n">Year</span><span class="p">,</span><span class="n">Category</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
</span><span class="n">summarise</span><span class="p">(</span><span class="n">AnnualAvg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mean</span><span class="p">(</span><span class="n">Value</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
</span><span class="n">group_by</span><span class="p">(</span><span class="n">Category</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
</span><span class="n">mutate</span><span class="p">(</span><span class="n">AnnualAvgChange</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">AnnualAvg</span><span class="o">/</span><span class="n">lag</span><span class="p">(</span><span class="n">AnnualAvg</span><span class="p">)</span><span class="m">-1</span><span class="p">)</span><span class="o">*</span><span class="m">100</span><span class="p">,</span><span class="w">
       </span><span class="n">PurchasingPower</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">AnnualAvg</span><span class="o">/</span><span class="n">lag</span><span class="p">(</span><span class="n">AnnualAvg</span><span class="p">)</span><span class="o">*</span><span class="m">100</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
</span><span class="n">filter</span><span class="p">(</span><span class="n">AnnualAvgChange</span><span class="o">!=</span><span class="s2">"NA"</span><span class="p">)</span><span class="w">

</span></code></pre></div></div>

<blockquote>
  <p><span style="font-family:Georgia; font-size:18px;"> Univariate Distributions </span></p>
</blockquote>

<p><span style="font-family:Georgia; font-size:16px;"> A univariate distribution refers to the distribution of just one random variable and understanding their form and function is extremely useful in data science. When visualizing a univariate distribution our purpose is to see how a single variable is spread. One can use this plot when visualizing a single variable. Histograms and density plots are a popular choice for visualizing single distribution. </span></p>

<blockquote>
  <p><span style="font-family:Georgia; font-size:18px;"> Histogram </span></p>
</blockquote>

<p><span style="font-family:Georgia; font-size:16px;"> One of the simplest ways to show data spread is Histogram. To construct a histogram from a continuous variable you first need to split the data into intervals, called bins. Depending on the data distribution and the purpose of visualization, an appropriate bin width is chosen. Although software chooses a default bin width, it is vital to understand data-based binning techniques used in estimating bin width. </span></p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Histogram using geom_histogram() of Annual average change of monthly CPI</span><span class="w">
</span><span class="n">cpi_histplot</span><span class="w"> </span><span class="o">&lt;-</span><span class="w">
</span><span class="n">ggplot</span><span class="p">(</span><span class="n">cpi_annualavg</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cpi_annualavg</span><span class="o">$</span><span class="n">AnnualAvgChange</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">geom_histogram</span><span class="p">(</span><span class="n">breaks</span><span class="o">=</span><span class="n">seq</span><span class="p">(</span><span class="m">-20</span><span class="p">,</span><span class="m">20</span><span class="p">,</span><span class="n">by</span><span class="o">=</span><span class="m">0.2</span><span class="p">),</span><span class="w">
                 </span><span class="n">col</span><span class="o">=</span><span class="s2">"darkblue"</span><span class="p">,</span><span class="w">
                 </span><span class="n">fill</span><span class="o">=</span><span class="s2">"steelblue"</span><span class="p">)</span><span class="w">  </span><span class="o">+</span><span class="w"> 
  </span><span class="n">labs</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">"Annual Average Change of monthly CPI"</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="s2">"Weight in the CPI"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"Histogram of Annual Average Change of monthly CPI(1982-2019)"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">theme_pprabhu</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">theme</span><span class="p">(</span><span class="n">plot.title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">hjust</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="p">,</span><span class="n">face</span><span class="o">=</span><span class="s2">"italic"</span><span class="p">),</span><span class="w">
        </span><span class="n">axis.text.x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">angle</span><span class="o">=</span><span class="m">0</span><span class="p">))</span><span class="w">    

</span><span class="n">cpi_histplot</span><span class="w">
</span></code></pre></div></div>
<figure>
  <img src="/img/Learning/visualization/viz2/univariate-histogram" alt="this is a placeholder image" width="100%" height="50%" class="center" />
  <figcaption style="color: grey"> Figure 1: Histogram illustrating the annual average change in monthly CPI </figcaption>
</figure>

<blockquote>
  <p><span style="font-family:Georgia; font-size:18px;"> Kernel Density Plots </span></p>
</blockquote>

<p><span style="font-family:Georgia; font-size:16px;">Kernel Density plots are a popular choice for visualizing single as well as multiple distributions because it creates a smooth curve on a given set of data. The smoothness of the curve is controlled by a bandwidth parameter that is analogous to the histogram bin width.</span></p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Kernel density estimaction using geom_density()</span><span class="w">
</span><span class="n">cpi_kerneldensity</span><span class="w"> </span><span class="o">&lt;-</span><span class="w">
  </span><span class="n">ggplot</span><span class="p">(</span><span class="n">cpi_annualavg</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cpi_annualavg</span><span class="o">$</span><span class="n">AnnualAvgChange</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">geom_density</span><span class="p">(</span><span class="n">fill</span><span class="o">=</span><span class="s2">"#56B4E950"</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span><span class="m">0.3</span><span class="p">,</span><span class="n">adjust</span><span class="o">=</span><span class="m">1</span><span class="o">/</span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">labs</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">"Annual Average Change of monthly CPI"</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="s2">"Weight in the CPI"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"Kernel density estimate of Annual Average Change of monthly CPI(1982-2019)"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">theme_pprabhu</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">theme</span><span class="p">(</span><span class="n">plot.title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">hjust</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="p">,</span><span class="n">face</span><span class="o">=</span><span class="s2">"italic"</span><span class="p">),</span><span class="w">
        </span><span class="n">axis.text.x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">angle</span><span class="o">=</span><span class="m">0</span><span class="p">))</span><span class="w">  

</span><span class="n">cpi_kerneldensity</span><span class="w">
</span></code></pre></div></div>
<figure>
  <img src="/img/Learning/visualization/viz2/univariate-kde" alt="this is a placeholder image" width="100%" height="50%" class="center" />
  <figcaption style="color: grey"> Figure 2: Kernel Density Estimate illustrating the annual average change in monthly CPI </figcaption>
</figure>

<blockquote>
  <p><span style="font-family:Georgia; font-size:18px;"> Empirical cumulative distribution function </span></p>
</blockquote>

<p><span style="font-family:Georgia; font-size:16px;"> An Empirical cumulative distribution function is an estimator of the Cumulative Distribution Function. The ECDF allows you to plot a feature of your data in order from least to greatest and see the whole feature as if is distributed across the data set. It has some useful properties such as being consistent and having a known confidence band. Best of all, itâ€™s non-parametric so it will work with pretty much any distribution.</span></p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Empirical cumulative distribution function in ascending order for December Over-the-year percent change in CPI</span><span class="w">
</span><span class="c1"># ecdf using stat_ecdf() ; geom = "step" can be used for a step ecdf</span><span class="w">
</span><span class="n">cpi_ecdf_plot</span><span class="w"> </span><span class="o">&lt;-</span><span class="w">
</span><span class="n">ggplot</span><span class="p">(</span><span class="n">cpi_otypct</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cpi_otypct</span><span class="o">$</span><span class="n">OverYrPercentChange</span><span class="p">,</span><span class="w"> 
                     </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="m">81</span><span class="o">*</span><span class="n">..y..</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">stat_ecdf</span><span class="p">(</span><span class="n">geom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"point"</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"#0072B2"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">scale_x_continuous</span><span class="p">(</span><span class="n">limits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">-22</span><span class="p">,</span><span class="w"> </span><span class="m">22</span><span class="p">),</span><span class="w"> 
                     </span><span class="n">expand</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">),</span><span class="w">
                     </span><span class="n">name</span><span class="o">=</span><span class="s2">"Over-the-year percent change in CPI"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">scale_y_continuous</span><span class="p">(</span><span class="n">limits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">-.5</span><span class="p">,</span><span class="w"> </span><span class="m">82</span><span class="p">),</span><span class="w"> 
                     </span><span class="n">expand</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">),</span><span class="w"> 
                     </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"ECDF"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">coord_cartesian</span><span class="p">(</span><span class="n">clip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"off"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">theme_pprabhu</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"ECDF of Over-the-Year Percent Change in CPI (Ascending)"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">theme</span><span class="p">(</span><span class="n">axis.line.x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_blank</span><span class="p">(),</span><span class="w">
        </span><span class="n">plot.title</span><span class="o">=</span><span class="n">element_text</span><span class="p">(</span><span class="n">hjust</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="p">,</span><span class="n">face</span><span class="o">=</span><span class="s2">"italic"</span><span class="p">),</span><span class="w">
        </span><span class="n">axis.text.x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">angle</span><span class="o">=</span><span class="m">0</span><span class="p">))</span><span class="w">

</span><span class="n">cpi_ecdf_plot</span><span class="w">
</span></code></pre></div></div>
<figure>
  <img src="/img/Learning/visualization/viz2/univariate-ecdf-asc" alt="this is a placeholder image" width="100%" height="50%" class="center" />
  <figcaption style="color: grey"> Figure 3: Empirical Cumulative Distribution Function of Over-the-year percent change in CPI.(Ascending) </figcaption>
</figure>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Empirical cumulative distribution function in descending order</span><span class="w">
</span><span class="n">ggplot</span><span class="p">(</span><span class="n">cpi_otypct</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cpi_otypct</span><span class="o">$</span><span class="n">OverYrPercentChange</span><span class="p">,</span><span class="w">  
                         </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">82-81</span><span class="o">*</span><span class="n">..y..</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">stat_ecdf</span><span class="p">(</span><span class="n">geom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"step"</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"#0072B2"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">scale_x_continuous</span><span class="p">(</span><span class="n">limits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">-22</span><span class="p">,</span><span class="w"> </span><span class="m">22</span><span class="p">),</span><span class="w"> 
                     </span><span class="n">expand</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">),</span><span class="w">
                     </span><span class="n">name</span><span class="o">=</span><span class="s2">"Over-the-year percent change in CPI"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">scale_y_continuous</span><span class="p">(</span><span class="n">limits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">-.5</span><span class="p">,</span><span class="w"> </span><span class="m">82</span><span class="p">),</span><span class="w"> 
                     </span><span class="n">expand</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">),</span><span class="w"> 
                     </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"ECDF"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">coord_cartesian</span><span class="p">(</span><span class="n">clip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"off"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">theme_pprabhu</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"ECDF of Over-the-Year Percent Change in CPI (Descending)"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">theme</span><span class="p">(</span><span class="n">axis.line.x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_blank</span><span class="p">(),</span><span class="w">
        </span><span class="n">plot.title</span><span class="o">=</span><span class="n">element_text</span><span class="p">(</span><span class="n">hjust</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="p">,</span><span class="n">face</span><span class="o">=</span><span class="s2">"italic"</span><span class="p">),</span><span class="w">
        </span><span class="n">axis.text.x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">angle</span><span class="o">=</span><span class="m">0</span><span class="p">))</span><span class="w">

</span></code></pre></div></div>
<figure>
  <img src="/img/Learning/visualization/viz2/univariate-ecdf-desc" alt="this is a placeholder image" width="100%" height="50%" class="center" />
  <figcaption style="color: grey"> Figure 4: Empirical Cumulative Distribution Function of Over-the-year percent change in CPI.(Descending) </figcaption>
</figure>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Normalized ecdf </span><span class="w">
</span><span class="n">ggplot</span><span class="p">(</span><span class="n">cpi_otypct</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cpi_otypct</span><span class="o">$</span><span class="n">OverYrPercentChange</span><span class="p">,</span><span class="w">  
                         </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="n">..y..</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">stat_ecdf</span><span class="p">(</span><span class="n">geom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"step"</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"#0072B2"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">scale_x_continuous</span><span class="p">(</span><span class="n">limits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">-22</span><span class="p">,</span><span class="w"> </span><span class="m">22</span><span class="p">),</span><span class="w"> 
                     </span><span class="n">expand</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">),</span><span class="w">
                     </span><span class="n">name</span><span class="o">=</span><span class="s2">"Over-the-year percent change in CPI"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">scale_y_continuous</span><span class="p">(</span><span class="n">limits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">),</span><span class="w"> 
                     </span><span class="n">expand</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">),</span><span class="w"> 
                     </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"ECDF"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">coord_cartesian</span><span class="p">(</span><span class="n">clip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"off"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">theme_pprabhu</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"Normalized ECDF of Over-the-Year Percent Change in CPI"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">theme</span><span class="p">(</span><span class="n">axis.line.x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_blank</span><span class="p">(),</span><span class="w">
        </span><span class="n">plot.title</span><span class="o">=</span><span class="n">element_text</span><span class="p">(</span><span class="n">hjust</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="p">,</span><span class="n">face</span><span class="o">=</span><span class="s2">"italic"</span><span class="p">),</span><span class="w">
        </span><span class="n">axis.text.x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">angle</span><span class="o">=</span><span class="m">0</span><span class="p">))</span><span class="w">

</span></code></pre></div></div>
<figure>
  <img src="/img/Learning/visualization/viz2/univariate-ecdf-norm" alt="this is a placeholder image" width="100%" height="50%" class="center" />
  <figcaption style="color: grey"> Figure 5: Normalized Empirical Cumulative Distribution Function of Over-the-year percent change in CPI </figcaption>
</figure>

<blockquote>
  <p><span style="font-family:Georgia; font-size:18px;"> Multivariate Distributions </span></p>
</blockquote>

<p><span style="font-family:Georgia; font-size:16px;"> Visualizing multivariate distributions in a single plot arises in various situations as discussed in the following examples. For example, one might just be interested in comparing data spread of a single variable at various times for comparable data (Example: Price of precious metals); One may be curious about outliers or the density of the data points around a specified value; one might also want to compare multiple variables in a single dataset(Example: Salary distribution of male/female employees); One might be interested to know which data distribution is more volatile than the other; and so on.. The plots used in these scenarios depends on the number of distributions involved. The intention of the plot is to provide clarity on the purpose of the plot. Histograms and density plots are used when the number of distributions are less. The plots used to visualize multiple distributions includes, but not limited to, box plots, violin plot, strip chart, sina plots, ridgeline plots, boxen plots. Density plots work well for multiple distributions as they are somewhat distinct and contiguous. </span></p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Plots the Kernel density estimation for multiple distributions distinct and contiguous</span><span class="w">
</span><span class="n">cpi_annualavg_kde</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">filter</span><span class="p">(</span><span class="n">cpi_annualavg</span><span class="p">,</span><span class="n">Category</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s1">'Housing'</span><span class="p">,</span><span class="w">
                                                          </span><span class="s1">'Transportation'</span><span class="p">,</span><span class="w">
                                                          </span><span class="s1">'Recreation'</span><span class="p">,</span><span class="w">
                                                          </span><span class="s1">'Food &amp; Beverages'</span><span class="p">))</span><span class="w">

</span><span class="n">cpi_annualavg_kdeplot</span><span class="w"> </span><span class="o">&lt;-</span><span class="w">
</span><span class="n">ggplot</span><span class="p">(</span><span class="n">cpi_annualavg_kde</span><span class="p">,</span><span class="w">
       </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cpi_annualavg_kde</span><span class="o">$</span><span class="n">AnnualAvgChange</span><span class="p">,</span><span class="w">
           </span><span class="n">color</span><span class="o">=</span><span class="n">cpi_annualavg_kde</span><span class="o">$</span><span class="n">Category</span><span class="p">,</span><span class="w">
           </span><span class="n">fill</span><span class="o">=</span><span class="n">cpi_annualavg_kde</span><span class="o">$</span><span class="n">Category</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">geom_density</span><span class="p">(</span><span class="n">alpha</span><span class="o">=</span><span class="m">0.3</span><span class="p">,</span><span class="n">adjust</span><span class="o">=</span><span class="m">1</span><span class="o">/</span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">  
  </span><span class="n">labs</span><span class="p">(</span><span class="n">fill</span><span class="o">=</span><span class="s2">"CPI Category"</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s2">"CPI Category"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">scale_x_continuous</span><span class="p">(</span><span class="n">limits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">-20</span><span class="p">,</span><span class="w"> </span><span class="m">20</span><span class="p">),</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Annual Average Change of monthly Consumer Price Index"</span><span class="p">,</span><span class="w"> </span><span class="n">expand</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">scale_y_continuous</span><span class="p">(</span><span class="n">limits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="m">0.75</span><span class="p">),</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Weight in the CPI"</span><span class="p">,</span><span class="w"> </span><span class="n">expand</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">coord_cartesian</span><span class="p">(</span><span class="n">clip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"off"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"Kernel density estimate of CPI Components"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">theme_pprabhu</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">scale_fill_manual</span><span class="p">(</span><span class="n">values</span><span class="o">=</span><span class="n">pprabhu_pal</span><span class="p">(</span><span class="s2">"div"</span><span class="p">,</span><span class="n">reverse</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)(</span><span class="m">4</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">scale_color_manual</span><span class="p">(</span><span class="n">values</span><span class="o">=</span><span class="n">pprabhu_pal</span><span class="p">(</span><span class="s2">"div"</span><span class="p">,</span><span class="n">reverse</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)(</span><span class="m">4</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">theme</span><span class="p">(</span><span class="n">plot.title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">hjust</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="p">,</span><span class="n">face</span><span class="o">=</span><span class="s2">"italic"</span><span class="p">),</span><span class="w">
        </span><span class="n">legend.position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"bottom"</span><span class="p">,</span><span class="w">
        </span><span class="n">axis.text.x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">angle</span><span class="o">=</span><span class="m">0</span><span class="p">))</span><span class="w"> 

</span><span class="n">cpi_annualavg_kdeplot</span><span class="w">
</span></code></pre></div></div>

<p><span style="font-family:Georgia; font-size:16px;">
Thanks for reading! As I mentioned in the beginning, there are a lot of cool visualization techniques available for visualizing distributions. To modify the visualizations with your own data, Click <a href="https://colab.research.google.com/github/prabhupavitra/Data-Visualization-with-R/blob/master/Visualizing%20Amounts.ipynb"> Colab Notebook </a> to edit and run the workbook using Google Colab. 
If you want to get in touch with me, feel free to reach me on my email. You can also view the code in <a href="https://github.com/prabhupavitra/Data-Visualization-with-R"> my Github repository </a>.</span></p>

        
      </section>

      <footer class="page__meta">
        
        


        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2020-08-10T22:12:28-05:00">August 10, 2020</time></p>
        
      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?text=Financial+Data+Visualization+-+Distributions%20http%3A%2F%2Flocalhost%3A4000%2Flearning%2FR_DataVisualization_VisualizingDistributions%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2Flearning%2FR_DataVisualization_VisualizingDistributions%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Flocalhost%3A4000%2Flearning%2FR_DataVisualization_VisualizingDistributions%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/learning/R_DataVisualization_VisualizingAmounts/" class="pagination--pager" title="Financial Data Visualization - Amounts
">Previous</a>
    
    
      <a href="/learning/Evaluation%20Metrics/" class="pagination--pager" title="Model Evaluation Metrics
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You may also enjoy</h4>
      <div class="grid__wrapper">
        
      </div>
    </div>
  
</div>

    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="https://github.com/prabhupavitra?tab=repositories" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
      
    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2021 Pavitra Prabhu. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script src="https://kit.fontawesome.com/4eee35f757.js"></script>










  </body>
</html>
